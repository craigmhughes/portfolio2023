import Head from 'next/head'
import { Inter } from '@next/font/google'
import styles from '@/styles/Home.module.css'
import {Canvas} from '@react-three/fiber';
import { OrbitControls, OrthographicCamera, Plane, Stats } from '@react-three/drei';
import Keyboard from '@/components/Keyboard';
import { MeshLambertMaterial, MeshPhongMaterial, MeshStandardMaterial } from 'three';
import { Debug, Physics, useBox, usePlane } from '@react-three/cannon';
import { useRef } from 'react';

const inter = Inter({ subsets: ['latin'] })

const Ground = ({...props}) => {
  const [ref] = usePlane(() => ({ rotation: [-Math.PI / 2, 0, 0], ...props }));

  return (
    <Plane ref={ref} {...props} />
  );
};

export default function Home() {
  const groundRef = useRef();

  // Dark = #000001; Light = #222222;
  const planeMaterial = new MeshLambertMaterial({ color: "#222222" });

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.main}>
        <div className={styles.canvasWrap}>
          <Canvas shadows="soft" frameloop="demand" performance={{ min: 0.5 }}>

            <ambientLight intensity={1} />
            <pointLight 
              intensity={6}
              decay={0.1}
              position={[60, 100, 60]} 
              color="#3377ff"
              castShadow
            />

            <pointLight 
              intensity={6}
              position={[-120, 40, -100]} 
              color="#ffffff"
            />

            <Physics>
                <Keyboard 
                  scale={0.08} 
                  position={[0, 20, 0]}
                  rotation-x={(Math.PI / 4)}
                  castShadow 
                />
                <Ground 
                  ref={groundRef}
                  scale={290}
                  rotation-x={(-Math.PI / 2)}
                  position={[0, -7, 0]}
                  receiveShadow
                  material={planeMaterial}
                />
            </Physics>

            <OrthographicCamera
              makeDefault
              zoom={8}
              near={-100}
              far={280}
              position={[-50, 40, 50]}
              rotation-x={(-Math.PI / 4)} 
              rotation-y={(-Math.PI / 4)} 
              rotation-z={(-Math.PI / 5)}
            />


            {/* <OrbitControls /> */}
            {/* <Stats /> */}
          </Canvas>
        </div>
      </main>
    </>
  )
}
