import {Physics, usePlane} from '@react-three/cannon';
import {OrthographicCamera, Plane} from '@react-three/drei';
import {Canvas} from '@react-three/fiber';

import type {NextPage} from 'next';
import Head from 'next/head';
import {useRef} from 'react';
import {MeshLambertMaterial} from 'three';

import Keyboard from '@/components/Keyboard';
import styles from '@/styles/Home.module.css';

// import {Inter} from '@next/font/google';
// const inter = Inter({subsets: ['latin']});

function Ground({...props}: any): JSX.Element {
    const [ref] = usePlane(() => ({rotation: [-Math.PI / 2, 0, 0], ...props}));

    return <Plane {...props} ref={ref} />;
}

const Home: NextPage = (): JSX.Element => {
    const groundRef = useRef();

    // Dark = #000001; Light = #222222;
    const planeMaterial = new MeshLambertMaterial({color: '#222222'});

    return (
        <>
            <Head>
                <title>Create Next App</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <main className={styles.main}>
                <div className={styles.canvasWrap}>
                    <Canvas shadows="soft" frameloop="demand" performance={{min: 0.5}}>
                        <ambientLight intensity={1} />
                        <pointLight intensity={6} decay={0.1} position={[60, 100, 60]} color="#3377ff" castShadow />

                        <pointLight intensity={6} position={[-120, 40, -100]} color="#ffffff" />

                        <Physics>
                            <Keyboard scale={0.08} position={[0, 20, 0]} rotation-x={Math.PI / 4} castShadow />
                            <Ground
                                ref={groundRef}
                                scale={290}
                                rotation-x={-Math.PI / 2}
                                position={[0, -7, 0]}
                                receiveShadow
                                material={planeMaterial}
                            />
                        </Physics>

                        <OrthographicCamera
                            makeDefault
                            zoom={8}
                            near={-100}
                            far={280}
                            position={[-50, 40, 50]}
                            rotation-x={-Math.PI / 4}
                            rotation-y={-Math.PI / 4}
                            rotation-z={-Math.PI / 5}
                        />

                        {/* <OrbitControls /> */}
                        {/* <Stats /> */}
                    </Canvas>
                </div>
            </main>
        </>
    );
};

export default Home;
